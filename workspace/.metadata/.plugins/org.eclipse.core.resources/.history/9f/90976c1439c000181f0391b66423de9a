import java.util.Scanner;

/*
 * AttributeFactory.java
 * Copyright (c) 2018 Georgetown University.  All Rights Reserved.
 */

public class AttributeFactory extends Object {

	/**
	 * Processes a single attribute declaration, consisting of the keyword &attribute, name, and either the keyword numeric or a list of nominal values.
	 * @param scanner - a scanner containing the attribute's tokens
	 * @return the constructed attribute
	 * @throws Exception - if a parse exception occurs
	 */
	public static Attribute make( Scanner scanner ) throws Exception {
		if( scanner == null ) {
			throw new Exception("Invalid Scanner object passed-in!");
		}
		int idx = 0;
		String name = "";
		Attribute attr = null;
		try {
			while( scanner.hasNext() ) {
				if(idx == 0) {
					// @attribute keyword; skip
					
					continue;
				}
				else if(idx == 1) {
					// set attribute name
					name = scanner.next().trim();
				}
				else if(idx == 2) {
					String value = scanner.next().trim();
					if(value.toLowerCase().equals("numeric")) {
						// is a numeric attribute
						attr = new NumericAttribute(name);
						break;
					}
					else {
						// is a nominal attribute
						attr = new NominalAttribute(name);
						((NominalAttribute) attr).addValue(value);
					}
				}
				else if(idx > 2) {
					((NominalAttribute) attr).addValue(scanner.next().trim());
				}
				idx++;
			}
		}
		catch(Exception e) {
			System.err.println("Parsing error occurred!");
			e.printStackTrace();
		}
		return attr;
	}

}